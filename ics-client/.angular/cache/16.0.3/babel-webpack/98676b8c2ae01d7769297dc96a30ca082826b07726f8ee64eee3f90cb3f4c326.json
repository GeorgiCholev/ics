{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nlet ImageGalleryComponent = class ImageGalleryComponent {\n  constructor(dataAccessService, navigationService, router, activatedRoute) {\n    this.dataAccessService = dataAccessService;\n    this.navigationService = navigationService;\n    this.router = router;\n    this.activatedRoute = activatedRoute;\n    this.page = 0;\n    this.Object = Object;\n    this.navigationService.setNavigationPreferencesWith(true, 'gallery-page');\n  }\n  ngOnInit() {\n    this.activatedRoute.queryParams.subscribe(params => {\n      this.dataAccessService.getImagesPageOf(params).subscribe({\n        next: dataArr => {\n          if (this.gallery) {\n            this.gallery.push(...dataArr);\n          } else {\n            this.gallery = dataArr;\n          }\n        },\n        error: () => this.router.navigate([''])\n      });\n    });\n  }\n  onImgClick(imageId) {\n    this.router.navigate(['/images', imageId]).catch(err => console.log(err));\n  }\n  getTopThreeTags(image) {\n    const tagEntries = Object.entries(image.tags);\n    tagEntries.sort((a, b) => b[1] - a[1]);\n    return tagEntries.slice(0, 3);\n  }\n};\nImageGalleryComponent = __decorate([Component({\n  templateUrl: \"image-gallery.component.html\",\n  styleUrls: [\"image-gallery.component.css\"]\n})], ImageGalleryComponent);\nexport { ImageGalleryComponent };","map":{"version":3,"names":["Component","ImageGalleryComponent","constructor","dataAccessService","navigationService","router","activatedRoute","page","Object","setNavigationPreferencesWith","ngOnInit","queryParams","subscribe","params","getImagesPageOf","next","dataArr","gallery","push","error","navigate","onImgClick","imageId","catch","err","console","log","getTopThreeTags","image","tagEntries","entries","tags","sort","a","b","slice","__decorate","templateUrl","styleUrls"],"sources":["/Users/georgicholev/MyDocuments/ics/ics-client/src/app/image-gallery/image-gallery.component.ts"],"sourcesContent":["import {Component, OnInit} from \"@angular/core\";\nimport {DataAccessService} from \"../shared/data-access.service\";\nimport {NavigationService} from \"../shared/navigation.service\";\nimport {ActivatedRoute, Router} from \"@angular/router\";\nimport {Image} from \"../shared/image\";\n\n@Component({\n    templateUrl: \"image-gallery.component.html\",\n    styleUrls: [\"image-gallery.component.css\"]\n})\nexport class ImageGalleryComponent implements OnInit {\n\n    page: number = 0;\n    gallery!: Image[]\n\n    constructor(private dataAccessService: DataAccessService, private navigationService: NavigationService,\n                private router: Router, private activatedRoute: ActivatedRoute) {\n        this.navigationService.setNavigationPreferencesWith(true, 'gallery-page');\n    }\n\n    ngOnInit(): void {\n        this.activatedRoute.queryParams.subscribe(params => {\n\n            this.dataAccessService.getImagesPageOf(params)\n                .subscribe({\n                    next: (dataArr) => {\n                        if (this.gallery) {\n                            this.gallery.push(...dataArr)\n                        } else {\n                            this.gallery = dataArr;\n                        }\n                    },\n                    error: () => this.router.navigate([''])\n                })\n        });\n    }\n\n    onImgClick(imageId: string) {\n        this.router.navigate(['/images', imageId])\n            .catch(err => console.log(err));\n    }\n\n    getTopThreeTags(image: Image) {\n        const tagEntries: [string, number][] = Object.entries(image.tags);\n        tagEntries.sort((a, b) => b[1] - a[1]);\n        return tagEntries.slice(0, 3);\n    }\n\n\n    protected readonly Object = Object;\n}"],"mappings":";AAAA,SAAQA,SAAS,QAAe,eAAe;AAU/C,IAAaC,qBAAqB,GAAlC,MAAaA,qBAAqB;EAK9BC,YAAoBC,iBAAoC,EAAUC,iBAAoC,EAClFC,MAAc,EAAUC,cAA8B;IADtD,KAAAH,iBAAiB,GAAjBA,iBAAiB;IAA6B,KAAAC,iBAAiB,GAAjBA,iBAAiB;IAC/D,KAAAC,MAAM,GAANA,MAAM;IAAkB,KAAAC,cAAc,GAAdA,cAAc;IAJ1D,KAAAC,IAAI,GAAW,CAAC;IAqCG,KAAAC,MAAM,GAAGA,MAAM;IAhC9B,IAAI,CAACJ,iBAAiB,CAACK,4BAA4B,CAAC,IAAI,EAAE,cAAc,CAAC;EAC7E;EAEAC,QAAQA,CAAA;IACJ,IAAI,CAACJ,cAAc,CAACK,WAAW,CAACC,SAAS,CAACC,MAAM,IAAG;MAE/C,IAAI,CAACV,iBAAiB,CAACW,eAAe,CAACD,MAAM,CAAC,CACzCD,SAAS,CAAC;QACPG,IAAI,EAAGC,OAAO,IAAI;UACd,IAAI,IAAI,CAACC,OAAO,EAAE;YACd,IAAI,CAACA,OAAO,CAACC,IAAI,CAAC,GAAGF,OAAO,CAAC;WAChC,MAAM;YACH,IAAI,CAACC,OAAO,GAAGD,OAAO;;QAE9B,CAAC;QACDG,KAAK,EAAEA,CAAA,KAAM,IAAI,CAACd,MAAM,CAACe,QAAQ,CAAC,CAAC,EAAE,CAAC;OACzC,CAAC;IACV,CAAC,CAAC;EACN;EAEAC,UAAUA,CAACC,OAAe;IACtB,IAAI,CAACjB,MAAM,CAACe,QAAQ,CAAC,CAAC,SAAS,EAAEE,OAAO,CAAC,CAAC,CACrCC,KAAK,CAACC,GAAG,IAAIC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC;EACvC;EAEAG,eAAeA,CAACC,KAAY;IACxB,MAAMC,UAAU,GAAuBrB,MAAM,CAACsB,OAAO,CAACF,KAAK,CAACG,IAAI,CAAC;IACjEF,UAAU,CAACG,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,CAAC;IACtC,OAAOJ,UAAU,CAACM,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EACjC;CAIH;AAxCYlC,qBAAqB,GAAAmC,UAAA,EAJjCpC,SAAS,CAAC;EACPqC,WAAW,EAAE,8BAA8B;EAC3CC,SAAS,EAAE,CAAC,6BAA6B;CAC5C,CAAC,C,EACWrC,qBAAqB,CAwCjC;SAxCYA,qBAAqB"},"metadata":{},"sourceType":"module","externalDependencies":[]}