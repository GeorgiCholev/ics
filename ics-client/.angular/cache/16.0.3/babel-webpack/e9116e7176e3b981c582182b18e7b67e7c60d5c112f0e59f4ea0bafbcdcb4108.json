{"ast":null,"code":"export {};","map":{"version":3,"names":[],"sources":["/Users/georgicholev/MyDocuments/ics/ics-client/src/app/image-gallery/image-gallery.component.ts"],"sourcesContent":["import {Component, OnInit} from \"@angular/core\";\nimport {DataAccessService} from \"../shared/data-access.service\";\nimport {NavigationService} from \"../shared/navigation.service\";\nimport {ActivatedRoute, Router} from \"@angular/router\";\nimport {Image} from \"../shared/image\";\nimport {BehaviorSubject} from \"rxjs\";\nimport * as _ from\n\n@Component({\n    templateUrl: \"image-gallery.component.html\",\n    styleUrls: [\"image-gallery.component.css\"]\n})\nexport class ImageGalleryComponent implements OnInit {\n\n    page: number = 0;\n    gallery!: Image[]\n\n    constructor(private dataAccessService: DataAccessService, private navigationService: NavigationService,\n                private router: Router, private activatedRoute: ActivatedRoute) {\n        this.navigationService.setNavigationPreferencesWith(true, 'gallery-page');\n    }\n\n    ngOnInit(): void {\n        this.activatedRoute.queryParams.subscribe(params => {\n\n            this.dataAccessService.getImagesPageOf(params)\n                .subscribe({\n                    next: (dataArr) => {\n                        if (this.gallery) {\n                            this.gallery.push(...dataArr)\n                        } else {\n                            this.gallery = dataArr;\n                        }\n                    },\n                    error: () => this.router.navigate([''])\n                })\n        });\n    }\n\n    onImgClick(imageId: string) {\n        this.router.navigate(['/images', imageId])\n            .catch(err => console.log(err));\n    }\n\n    getTopThreeTags(image: Image) {\n        const tagEntries: [string, number][] = Object.entries(image.tags);\n        tagEntries.sort((a, b) => b[1] - a[1]);\n        return tagEntries.slice(0, 3);\n    }\n\n\n    protected readonly Object = Object;\n}"],"mappings":""},"metadata":{},"sourceType":"module","externalDependencies":[]}